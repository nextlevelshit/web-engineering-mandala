<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Engineering Learning Diagram</title>
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <style>
      body {
          font-family: system-ui, sans-serif;
          margin: 0;
          padding: 20px;
          background: #0a0a0a;
          color: white;
      }

      .diagram-container {
          display: flex;
          justify-content: center;
          align-items: center;
          min-height: 80vh;
      }

      .sector-label {
          font-size: 14px;
          font-weight: 600;
          text-anchor: middle;
          dominant-baseline: middle;
          pointer-events: none;
      }

      .level-label {
          font-size: 12px;
          font-weight: 500;
          text-anchor: middle;
          dominant-baseline: middle;
          pointer-events: none;
      }

      .center-label {
          font-size: 16px;
          font-weight: 700;
          text-anchor: middle;
          dominant-baseline: middle;
          fill: white;
      }

      .arc-path {
          stroke: rgba(255, 255, 255, 0.1);
          stroke-width: 1;
          transition: all 0.3s ease;
      }

      .arc-path:hover {
          stroke: rgba(255, 255, 255, 0.3);
          stroke-width: 2;
      }
  </style>
</head>
<body>
<div class="diagram-container">
  <svg id="learning-diagram" width="800" height="800"></svg>
</div>

<script>
  // Configuration
  const width = 800;
  const height = 800;
  const centerX = width / 2;
  const centerY = height / 2;

  // Color scheme - maintaining the tripartite division
  const colors = {
    html: {
      light: '#818cf8', // indigo-400
      medium: '#6366f1', // indigo-500
      dark: '#4f46e5'    // indigo-600
    },
    css: {
      light: '#67e8f9', // cyan-300
      medium: '#22d3ee', // cyan-400
      dark: '#06b6d4'   // cyan-500
    },
    js: {
      light: '#fca5a5', // red-300
      medium: '#f87171', // red-400
      dark: '#ef4444'   // red-500
    }
  };

  // Data structure defining our learning progression
  const learningData = {
    center: { name: 'package.json', radius: 60 },
    levels: [
      {
        name: 'core',
        innerRadius: 70,
        outerRadius: 140,
        sectors: [
          {
            name: 'HTML',
            color: colors.html.medium,
            items: ['index.html', 'semantic tags', 'forms', 'accessibility']
          },
          {
            name: 'CSS',
            color: colors.css.medium,
            items: ['styles.css', 'selectors', 'flexbox', 'grid']
          },
          {
            name: 'JavaScript',
            color: colors.js.medium,
            items: ['script.js', 'ES6+', 'DOM', 'events']
          }
        ]
      },
      {
        name: 'bundlers',
        innerRadius: 150,
        outerRadius: 220,
        sectors: [
          {
            name: 'HTML Tools',
            color: colors.html.dark,
            items: ['PostHTML', 'htmlnano', 'MJML', 'Pug']
          },
          {
            name: 'CSS Tools',
            color: colors.css.dark,
            items: ['Sass', 'PostCSS', 'TailwindCSS', 'StyleLint']
          },
          {
            name: 'JS Tools',
            color: colors.js.dark,
            items: ['Vite', 'Webpack', 'esbuild', 'TSC']
          }
        ]
      },
      {
        name: 'application',
        innerRadius: 230,
        outerRadius: 300,
        sectors: [
          {
            name: 'HTML Advanced',
            color: colors.html.light,
            items: ['Web Components', '<details>', 'WCAG', 'Schema.org']
          },
          {
            name: 'CSS Frameworks',
            color: colors.css.light,
            items: ['Tailwind', 'CSS-in-JS', 'Design Systems', 'Container Queries']
          },
          {
            name: 'JS Frameworks',
            color: colors.js.light,
            items: ['React', 'Vue', 'Express', 'Node.js']
          }
        ]
      },
      {
        name: 'ecosystem',
        innerRadius: 310,
        outerRadius: 380,
        sectors: [
          {
            name: 'HTML Ecosystem',
            color: colors.html.medium,
            items: ['SSR/SSG', 'PWA', 'AMP', 'SEO']
          },
          {
            name: 'CSS Ecosystem',
            color: colors.css.medium,
            items: ['Animation', 'CSS Grid', '3D', 'Variables']
          },
          {
            name: 'JS Ecosystem',
            color: colors.js.medium,
            items: ['TypeScript', 'Testing', 'WebAPI', 'Performance']
          }
        ]
      }
    ]
  };

  // Create SVG
  const svg = d3.select('#learning-diagram');
  const g = svg.append('g').attr('transform', `translate(${centerX}, ${centerY})`);

  // Arc generator
  const arc = d3.arc();

  // Draw center circle
  g.append('circle')
    .attr('r', learningData.center.radius)
    .attr('fill', '#1f2937')
    .attr('stroke', 'rgba(255, 255, 255, 0.2)')
    .attr('stroke-width', 2);

  g.append('text')
    .attr('class', 'center-label')
    .text(learningData.center.name);

  // Draw levels
  learningData.levels.forEach((level, levelIndex) => {
    const anglePerSector = (2 * Math.PI) / level.sectors.length;

    level.sectors.forEach((sector, sectorIndex) => {
      const startAngle = sectorIndex * anglePerSector - Math.PI / 2;
      const endAngle = (sectorIndex + 1) * anglePerSector - Math.PI / 2;

      // Create arc path
      const arcPath = arc({
        innerRadius: level.innerRadius,
        outerRadius: level.outerRadius,
        startAngle: startAngle,
        endAngle: endAngle
      });

      // Draw sector
      const sectorGroup = g.append('g')
        .attr('class', `sector-${levelIndex}-${sectorIndex}`);

      sectorGroup.append('path')
        .attr('d', arcPath)
        .attr('fill', sector.color)
        .attr('class', 'arc-path')
        .attr('opacity', 0.8);

      // Add sector label
      const labelRadius = (level.innerRadius + level.outerRadius) / 2;
      const labelAngle = startAngle + anglePerSector / 2;
      const labelX = Math.cos(labelAngle) * labelRadius;
      const labelY = Math.sin(labelAngle) * labelRadius;

      sectorGroup.append('text')
        .attr('class', 'sector-label')
        .attr('x', labelX)
        .attr('y', labelY)
        .attr('fill', 'white')
        .attr('font-size', '13px')
        .text(sector.name);

      // Add items as smaller text
      const itemRadius = level.outerRadius - 15;
      sector.items.forEach((item, itemIndex) => {
        const itemAngle = startAngle + (anglePerSector / (sector.items.length + 1)) * (itemIndex + 1);
        const itemX = Math.cos(itemAngle) * itemRadius;
        const itemY = Math.sin(itemAngle) * itemRadius;

        sectorGroup.append('text')
          .attr('class', 'level-label')
          .attr('x', itemX)
          .attr('y', itemY)
          .attr('fill', 'rgba(255, 255, 255, 0.8)')
          .attr('font-size', '10px')
          .text(item);
      });
    });
  });

  // Add level indicators (concentric circles for reference)
  learningData.levels.forEach(level => {
    g.append('circle')
      .attr('r', level.innerRadius)
      .attr('fill', 'none')
      .attr('stroke', 'rgba(255, 255, 255, 0.1)')
      .attr('stroke-width', 1);
  });

  // Add outer boundary
  g.append('circle')
    .attr('r', learningData.levels[learningData.levels.length - 1].outerRadius)
    .attr('fill', 'none')
    .attr('stroke', 'rgba(255, 255, 255, 0.2)')
    .attr('stroke-width', 2);

  // Add interactivity
  svg.selectAll('.arc-path')
    .on('mouseover', function(event, d) {
      d3.select(this)
        .transition()
        .duration(200)
        .attr('opacity', 1);
    })
    .on('mouseout', function(event, d) {
      d3.select(this)
        .transition()
        .duration(200)
        .attr('opacity', 0.8);
    });

  // Add title and legend
  svg.append('text')
    .attr('x', centerX)
    .attr('y', 30)
    .attr('text-anchor', 'middle')
    .attr('font-size', '24px')
    .attr('font-weight', 'bold')
    .attr('fill', 'white')
    .text('Web Engineering Learning Progression');

  // Legend
  const legend = svg.append('g')
    .attr('transform', `translate(50, 100)`);

  const legendData = [
    { name: 'HTML Technologies', color: colors.html.medium },
    { name: 'CSS Technologies', color: colors.css.medium },
    { name: 'JavaScript Technologies', color: colors.js.medium }
  ];

  legendData.forEach((item, index) => {
    const legendRow = legend.append('g')
      .attr('transform', `translate(0, ${index * 25})`);

    legendRow.append('rect')
      .attr('width', 15)
      .attr('height', 15)
      .attr('fill', item.color);

    legendRow.append('text')
      .attr('x', 25)
      .attr('y', 12)
      .attr('fill', 'white')
      .attr('font-size', '14px')
      .text(item.name);
  });

  // Add level descriptions
  const levelDescriptions = svg.append('g')
    .attr('transform', `translate(${width - 200}, 100)`);

  const levels = [
    { name: 'Core', desc: 'Foundation files' },
    { name: 'Bundlers', desc: 'Build tools' },
    { name: 'Application', desc: 'Frameworks' },
    { name: 'Ecosystem', desc: 'Advanced concepts' }
  ];

  levels.forEach((level, index) => {
    const levelRow = levelDescriptions.append('g')
      .attr('transform', `translate(0, ${index * 25})`);

    levelRow.append('text')
      .attr('fill', 'white')
      .attr('font-size', '14px')
      .attr('font-weight', 'bold')
      .text(level.name);

    levelRow.append('text')
      .attr('x', 0)
      .attr('y', 15)
      .attr('fill', 'rgba(255, 255, 255, 0.7)')
      .attr('font-size', '12px')
      .text(level.desc);
  });

</script>
</body>
</html>
